(window.webpackJsonp=window.webpackJsonp||[]).push([[36],{351:function(t,v,_){"use strict";_.r(v);var e=_(7),d=Object(e.a)({},(function(){var t=this,v=t._self._c;return v("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[v("h1",{attrs:{id:"表-kubernetes常用命令"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#表-kubernetes常用命令"}},[t._v("#")]),t._v(" 表-Kubernetes常用命令")]),t._v(" "),v("h2",{attrs:{id:"_1-集群信息查询"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#_1-集群信息查询"}},[t._v("#")]),t._v(" 1. 集群信息查询")]),t._v(" "),v("h3",{attrs:{id:"综合信息"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#综合信息"}},[t._v("#")]),t._v(" 综合信息")]),t._v(" "),v("table",[v("thead",[v("tr",[v("th",[t._v("序号")]),t._v(" "),v("th",[t._v("命令")]),t._v(" "),v("th",[t._v("说明")])])]),t._v(" "),v("tbody",[v("tr",[v("td",[t._v("1")]),t._v(" "),v("td",[v("code",[t._v("kubectl cluster-info")])]),t._v(" "),v("td",[t._v("查看集群的基本信息。")])]),t._v(" "),v("tr",[v("td",[t._v("2")]),t._v(" "),v("td",[v("code",[t._v("kubectl cluster-info dump")])]),t._v(" "),v("td",[t._v("转储 “适合调试和诊断群集问题” 的集群完整信息，默认将所有信息转储到标准输出（注：信息量比较大）。")])]),t._v(" "),v("tr",[v("td",[t._v("3")]),t._v(" "),v("td",[v("code",[t._v("kubectl cluster-info dump --output-directory <目录名称>")])]),t._v(" "),v("td",[t._v("在指定的目录中构建一组文件，文件中包含集群的转储信息。")])])])]),t._v(" "),v("div",{staticClass:"custom-block tip"},[v("p",{staticClass:"custom-block-title"},[t._v("提示")]),t._v(" "),v("p",[t._v("命令"),v("code",[t._v("kubectl cluster-info dump")]),t._v("默认情况下只转储命名空间"),v("code",[t._v("kube-system'")]),t._v("中的内容，但是你可以使用"),v("code",[t._v("--namespaces")]),t._v("标志来切换到不同的命名空间，或者指定"),v("code",[t._v("--all-namespaces")]),t._v("来转储所有的命名空间。")])]),t._v(" "),v("h3",{attrs:{id:"版本信息"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#版本信息"}},[t._v("#")]),t._v(" 版本信息")]),t._v(" "),v("table",[v("thead",[v("tr",[v("th",[t._v("序号")]),t._v(" "),v("th",[t._v("命令")]),t._v(" "),v("th",[t._v("说明")])])]),t._v(" "),v("tbody",[v("tr",[v("td",[t._v("1")]),t._v(" "),v("td",[v("code",[t._v("kubectl version")])]),t._v(" "),v("td",[t._v("查看 K8s 版本信息。")])]),t._v(" "),v("tr",[v("td",[t._v("2")]),t._v(" "),v("td",[v("code",[t._v("kubectl version --short")])]),t._v(" "),v("td",[t._v("查看精简的 K8s 版本信息（注："),v("code",[t._v("--short")]),t._v("选项已被弃用，在未来的版本中将被移除。"),v("code",[t._v("--short")]),t._v("的输出将成为"),v("code",[t._v("kubectl version")]),t._v("的默认值）。")])])])]),t._v(" "),v("h3",{attrs:{id:"api-version"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#api-version"}},[t._v("#")]),t._v(" api-version")]),t._v(" "),v("table",[v("thead",[v("tr",[v("th",[t._v("序号")]),t._v(" "),v("th",[t._v("命令")]),t._v(" "),v("th",[t._v("说明")])])]),t._v(" "),v("tbody",[v("tr",[v("td",[t._v("1")]),t._v(" "),v("td",[v("code",[t._v("kubectl api-versions")])]),t._v(" "),v("td",[t._v("查看当前 K8s 版本支持的 api-version")])])])]),t._v(" "),v("h2",{attrs:{id:"_2-节点操作"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#_2-节点操作"}},[t._v("#")]),t._v(" 2. 节点操作")]),t._v(" "),v("table",[v("thead",[v("tr",[v("th",[t._v("序号")]),t._v(" "),v("th",[t._v("命令")]),t._v(" "),v("th",[t._v("作用")])])]),t._v(" "),v("tbody",[v("tr",[v("td",[t._v("1")]),t._v(" "),v("td",[v("code",[t._v("kubectl get nodes")])]),t._v(" "),v("td",[t._v("查看当前集群内的所有节点")])]),t._v(" "),v("tr",[v("td",[t._v("2")]),t._v(" "),v("td",[v("code",[t._v("kubectl top nodes")])]),t._v(" "),v("td",[t._v("查看当前集群内的所有节点工作负载（需要提前安装监控类插件）")])]),t._v(" "),v("tr",[v("td",[t._v("3")]),t._v(" "),v("td",[v("code",[t._v("kubectl cordon <节点名称>")])]),t._v(" "),v("td",[t._v("停止节点——停止对该 node 的调度，node 状态变为"),v("code",[t._v("SchedulingDisabled")]),t._v("，后续新创建的 Pod 将不会在该 node 上运行。"),v("br"),t._v("该 node 上原有的 Pod 不受影响，会继续运行。")])]),t._v(" "),v("tr",[v("td",[t._v("4")]),t._v(" "),v("td",[v("code",[t._v("kubectl drain <节点名称>")])]),t._v(" "),v("td",[t._v("驱逐节点——停止对该 node 的调度，node 状态变为"),v("code",[t._v("SchedulingDisabled")]),t._v("，并清空上面的所有 Pod，被清空的 Pod 会被调度到其他 node 上运行。")])]),t._v(" "),v("tr",[v("td",[t._v("5")]),t._v(" "),v("td",[v("code",[t._v("kubectl delete nodes <节点名称>")])]),t._v(" "),v("td",[t._v("删除节点——从 master 上删除该 node，失去对其的控制权（注：被删除的节点无法恢复！）。")])]),t._v(" "),v("tr",[v("td",[t._v("6")]),t._v(" "),v("td",[v("code",[t._v("kubectl uncordon <节点名称>")])]),t._v(" "),v("td",[t._v("恢复节点——将一个状态为"),v("code",[t._v("SchedulingDisabled")]),t._v("的 node 恢复为可用状态。"),v("br"),t._v("（注：被"),v("code",[t._v("kubectl delete")]),t._v("删除的节点无法恢复！）")])])])]),t._v(" "),v("table",[v("thead",[v("tr",[v("th",[t._v("序号")]),t._v(" "),v("th",[t._v("可选标志")]),t._v(" "),v("th",[t._v("作用")])])]),t._v(" "),v("tbody",[v("tr",[v("td",[t._v("1")]),t._v(" "),v("td",[v("code",[t._v("--force")])]),t._v(" "),v("td",[t._v("强制进行当前操作。")])]),t._v(" "),v("tr",[v("td",[t._v("2")]),t._v(" "),v("td",[v("code",[t._v("--delete-local-data")])]),t._v(" "),v("td",[t._v("删除节点本地数据——即使该节点上的某个 Pod 使用 emptyDir 来存储数据（节点丢失时将被删除的本地数据），也继续进行删除操作。")])]),t._v(" "),v("tr",[v("td",[t._v("3")]),t._v(" "),v("td",[v("code",[t._v("--ignore-daemonsets")])]),t._v(" "),v("td",[t._v("忽略由 DaemonSet 管理的 Pod。")])])])]),t._v(" "),v("h2",{attrs:{id:"_3-pod相关"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#_3-pod相关"}},[t._v("#")]),t._v(" 3. Pod相关")]),t._v(" "),v("h3",{attrs:{id:"pod信息"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#pod信息"}},[t._v("#")]),t._v(" Pod信息")]),t._v(" "),v("table",[v("thead",[v("tr",[v("th",[t._v("序号")]),t._v(" "),v("th",[t._v("命令")]),t._v(" "),v("th",[t._v("作用")])])]),t._v(" "),v("tbody",[v("tr",[v("td",[t._v("1")]),t._v(" "),v("td",[v("code",[t._v("kubectl get pods")])]),t._v(" "),v("td",[t._v("查看默认命名空间内的 Pod")])]),t._v(" "),v("tr",[v("td",[t._v("2")]),t._v(" "),v("td",[v("code",[t._v("kubectl top pods")])]),t._v(" "),v("td",[t._v("查看默认命名空间内的 Pod 工作负载（需要提前安装监控类插件）")])])])]),t._v(" "),v("table",[v("thead",[v("tr",[v("th",[t._v("序号")]),t._v(" "),v("th",[t._v("可选标志")]),t._v(" "),v("th",[t._v("作用")])])]),t._v(" "),v("tbody",[v("tr",[v("td",[t._v("1")]),t._v(" "),v("td",[v("code",[t._v("-n <命名空间名称>")])]),t._v(" "),v("td",[t._v("查看指定命名空间内的 Pod")])]),t._v(" "),v("tr",[v("td",[t._v("2")]),t._v(" "),v("td",[v("code",[t._v("--all-namespaces")])]),t._v(" "),v("td",[t._v("查看"),v("b",[t._v("所有")]),t._v("命名空间内的 Pod")])]),t._v(" "),v("tr",[v("td",[t._v("3")]),t._v(" "),v("td",[v("code",[t._v("-A")])]),t._v(" "),v("td",[t._v("同上，--all-namespaces 的简写")])])])]),t._v(" "),v("h2",{attrs:{id:"kubeadm"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#kubeadm"}},[t._v("#")]),t._v(" kubeadm")]),t._v(" "),v("h3",{attrs:{id:"kubeadm-token"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#kubeadm-token"}},[t._v("#")]),t._v(" kubeadm token")]),t._v(" "),v("table",[v("thead",[v("tr",[v("th",[t._v("序号")]),t._v(" "),v("th",[t._v("命令")]),t._v(" "),v("th",[t._v("作用")])])]),t._v(" "),v("tbody",[v("tr",[v("td",[t._v("1")]),t._v(" "),v("td",[v("code",[t._v("kubeadm token create --print-join-command")])]),t._v(" "),v("td",[t._v("创建新的 token 并打印加入集群的命令，其他主机可以通过该命令 来加入集群。")])])])]),t._v(" "),v("h2",{attrs:{id:"ctr命令行工具"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#ctr命令行工具"}},[t._v("#")]),t._v(" ctr命令行工具")]),t._v(" "),v("h3",{attrs:{id:"ctr-images"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#ctr-images"}},[t._v("#")]),t._v(" ctr images")]),t._v(" "),v("p",[t._v("提示：images 可以缩写为 "),v("code",[t._v("image")]),t._v(" 或 "),v("code",[t._v("i")]),t._v("。")]),t._v(" "),v("table",[v("thead",[v("tr",[v("th",[t._v("序号")]),t._v(" "),v("th",[t._v("命令")]),t._v(" "),v("th",[t._v("作用")])])]),t._v(" "),v("tbody",[v("tr",[v("td",[t._v("1")]),t._v(" "),v("td",[v("code",[t._v("ctr i ls")])]),t._v(" "),v("td",[t._v("查看默认命名空间中的镜像")])]),t._v(" "),v("tr",[v("td",[t._v("2")]),t._v(" "),v("td",[v("code",[t._v("ctr -n <命名空间名称> i ls")])]),t._v(" "),v("td",[t._v("查看指定命名空间中的镜像")])]),t._v(" "),v("tr",[v("td",[t._v("3")]),t._v(" "),v("td",[v("code",[t._v("ctr i pull <镜像地址/名称>")])]),t._v(" "),v("td",[t._v("拉取镜像到默认的命名空间中")])]),t._v(" "),v("tr",[v("td",[t._v("4")]),t._v(" "),v("td",[v("code",[t._v("ctr -n <命名空间名称> i pull <镜像地址/名称>")])]),t._v(" "),v("td",[t._v("拉取镜像到指定的命名空间中")])])])]),t._v(" "),v("h3",{attrs:{id:"ctr-namespaces"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#ctr-namespaces"}},[t._v("#")]),t._v(" ctr namespaces")]),t._v(" "),v("p",[t._v("提示：namespaces 可以缩写为 "),v("code",[t._v("namespace")]),t._v(" 或 "),v("code",[t._v("ns")]),t._v("。")]),t._v(" "),v("table",[v("thead",[v("tr",[v("th",[t._v("序号")]),t._v(" "),v("th",[t._v("命令")]),t._v(" "),v("th",[t._v("作用")])])]),t._v(" "),v("tbody",[v("tr",[v("td",[t._v("1")]),t._v(" "),v("td",[v("code",[t._v("ctr ns ls")])]),t._v(" "),v("td",[t._v("查看所有的镜像命名空间")])]),t._v(" "),v("tr",[v("td",[t._v("2")]),t._v(" "),v("td",[v("code",[t._v("ctr ns create <名称>")])]),t._v(" "),v("td",[t._v("创建镜像命名空间")])])])])])}),[],!1,null,null,null);v.default=d.exports}}]);