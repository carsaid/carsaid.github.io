(window.webpackJsonp=window.webpackJsonp||[]).push([[79],{394:function(a,t,s){"use strict";s.r(t);var e=s(7),r=Object(e.a)({},(function(){var a=this,t=a._self._c;return t("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[t("h2",{attrs:{id:"创建服务"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#创建服务"}},[a._v("#")]),a._v(" 创建服务")]),a._v(" "),t("h3",{attrs:{id:"为一个-pod-创建服务"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#为一个-pod-创建服务"}},[a._v("#")]),a._v(" 为一个 Pod 创建服务")]),a._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[a._v("kubectl expose pod "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("Pod名称"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--name")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("服务名称"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--port")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("服务端口"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v(" --target-port"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("容器端口"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v("\n")])]),a._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[a._v("1")]),t("br")])]),t("h3",{attrs:{id:"为一个-deployment-创建服务"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#为一个-deployment-创建服务"}},[a._v("#")]),a._v(" 为一个 Deployment 创建服务")]),a._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[a._v("kubectl expose deployment "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("控制器名称"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--name")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("服务名称"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--port")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("服务端口"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v(" --target-port"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("容器端口"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 示例")]),a._v("\nkubectl expose deployment web "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--name")]),a._v(" svc1 "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--port")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("80")]),a._v(" --target-port"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("80")]),a._v("\n")])]),a._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[a._v("1")]),t("br"),t("span",{staticClass:"line-number"},[a._v("2")]),t("br"),t("span",{staticClass:"line-number"},[a._v("3")]),t("br"),t("span",{staticClass:"line-number"},[a._v("4")]),t("br")])]),t("h2",{attrs:{id:"参数选项"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#参数选项"}},[a._v("#")]),a._v(" 参数选项")]),a._v(" "),t("h3",{attrs:{id:"name选项"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#name选项"}},[a._v("#")]),a._v(" --name选项")]),a._v(" "),t("p",[a._v("在创建服务时指定服务的名称，如果不指定该选项，则服务的名称默认与 控制器/Pod 的相同。")]),a._v(" "),t("h3",{attrs:{id:"port选项"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#port选项"}},[a._v("#")]),a._v(" --port选项")]),a._v(" "),t("p",[a._v("服务暴露的端口，可以根据需要随意指定。")]),a._v(" "),t("h3",{attrs:{id:"target-port选项"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#target-port选项"}},[a._v("#")]),a._v(" --target-port选项")]),a._v(" "),t("p",[a._v("容器开放的端口，需要根据容器的情况指定对应的端口，不能随意指定。")]),a._v(" "),t("h3",{attrs:{id:"selector选项"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#selector选项"}},[a._v("#")]),a._v(" --selector选项")]),a._v(" "),t("p",[a._v("自定义 service 根据哪些标签来追踪 Pod（和控制器类似）。被追踪的 Pod 必须同时具有全部的追踪标签（满足所有标签条件），而"),t("b",[a._v("不是")]),a._v("只满足其中一个标签。")]),a._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[a._v("kubectl expose deploy "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("控制器名称"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--selector")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("键"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">=")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("值"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 多个标签之间通过 逗号 来分隔")]),a._v("\nkubectl expose deploy "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("控制器名称"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--selector")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("键"),t("span",{pre:!0,attrs:{class:"token operator"}},[t("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[a._v("1")]),a._v(">")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("值"),t("span",{pre:!0,attrs:{class:"token operator"}},[t("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[a._v("1")]),a._v(">")]),a._v(","),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("键"),t("span",{pre:!0,attrs:{class:"token operator"}},[t("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[a._v("2")]),a._v(">")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("值"),t("span",{pre:!0,attrs:{class:"token operator"}},[t("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[a._v("2")]),a._v(">")]),a._v(","),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("..")]),a._v(".\n")])]),a._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[a._v("1")]),t("br"),t("span",{staticClass:"line-number"},[a._v("2")]),t("br"),t("span",{staticClass:"line-number"},[a._v("3")]),t("br"),t("span",{staticClass:"line-number"},[a._v("4")]),t("br")])]),t("h3",{attrs:{id:"type选项"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#type选项"}},[a._v("#")]),a._v(" --type选项")]),a._v(" "),t("p",[a._v("指定服务的类型。")]),a._v(" "),t("ul",[t("li",[t("code",[a._v("ClusterIP")]),a._v("：默认类型，为 svc 提供一个内网 IP 地址，直接通过地址访问 svc。")]),a._v(" "),t("li",[t("code",[a._v("NodePort")]),a._v("：将 svc 映射到节点物理机之上。当外部主机请求物理机时，物理机 转发请求给 服务，服务 再转发请求给 Pod。")]),a._v(" "),t("li",[t("code",[a._v("LoadBalancer")]),a._v("：将 svc 部署为一个负载均衡器，每个 svc 都会从地址池中获得一个单独的新 IP 地址。（该选项一般适用于 具有外部负载均衡器的 云提供商）")])]),a._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 会将 Pod 的 Web 服务映射到物理机的 80 端口上")]),a._v("\nkubectl expose pod nginx "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--port")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("80")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--type")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("NodePort\n")])]),a._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[a._v("1")]),t("br"),t("span",{staticClass:"line-number"},[a._v("2")]),t("br")])]),t("div",{staticClass:"custom-block note"},[t("p",{staticClass:"custom-block-title"},[a._v("学习更多")]),a._v(" "),t("p",[t("a",{attrs:{href:"https://zhuanlan.zhihu.com/p/266422557",target:"_blank",rel:"noopener noreferrer"}},[a._v("k8s-负载均衡器"),t("OutboundLink")],1)])])])}),[],!1,null,null,null);t.default=r.exports}}]);