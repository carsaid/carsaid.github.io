(window.webpackJsonp=window.webpackJsonp||[]).push([[138],{453:function(s,t,a){"use strict";a.r(t);var e=a(7),n=Object(e.a)({},(function(){var s=this,t=s._self._c;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("div",{staticClass:"cardListContainer"},[t("div",{staticClass:"card-list"},[t("span",{staticClass:"card-item row-2",staticStyle:{"background-color":"#F0DFB1","--randomColor":"#F0DFB1",color:"green"}},[t("div",[t("p",{staticClass:"name"},[s._v("翻译")]),s._v(" "),t("p",{staticClass:"desc"},[s._v("原文：https://devopscube.com/cks-exam-guide-tips/#minimize-host-os-footprint-reduce-attack-surface")])])])]),t("div",{staticClass:"language-yaml line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-yaml"}},[t("code",[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("name")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" 翻译\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("desc")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" 原文：https"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("//devopscube.com/cks"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("exam"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("guide"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("tips/"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#minimize-host-os-footprint-reduce-attack-surface")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("bgColor")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'#F0DFB1'")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("textColor")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'green'")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br")])])]),t("h1",{attrs:{id:"最小化主机操作系统的占用空间-减少攻击面"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#最小化主机操作系统的占用空间-减少攻击面"}},[s._v("#")]),s._v(" 最小化主机操作系统的占用空间（减少攻击面）")]),s._v(" "),t("ol",[t("li",[s._v("删除对集群操作不必要的二进制文件和服务。")]),s._v(" "),t("li",[s._v("添加正确的防火墙规则，限制对主机上的开放端口访问。")]),s._v(" "),t("li",[t("a",{attrs:{href:"https://devopscube.com/what-is-docker/",target:"_blank",rel:"noopener noreferrer"}},[s._v("容器"),t("OutboundLink")],1),s._v("在主机操作系统上的权限应该最小。以非 root 用户身份运行容器。")])]),s._v(" "),t("table",[t("thead",[t("tr",[t("th"),s._v(" "),t("th")])]),s._v(" "),t("tbody",[t("tr",[t("td",[s._v("限制内核模块")]),s._v(" "),t("td",[t("a",{attrs:{href:"https://kubernetes.io/zh-cn/docs/tasks/administer-cluster/securing-a-cluster/#preventing-containers-from-loading-unwanted-kernel-modules",target:"_blank",rel:"noopener noreferrer"}},[s._v("防止容器加载不需要的内核模块"),t("OutboundLink")],1)])])])]),s._v(" "),t("p",[s._v("（（（译者加：通过配置文件"),t("code",[s._v("/etc/modprobe.d/kubernetes-blacklist.conf")]),s._v("来限制容器可加载的内核模块。）））")]),s._v(" "),t("div",{staticClass:"custom-block note"},[t("p",{staticClass:"custom-block-title"},[s._v("译者加")]),s._v(" "),t("p",[s._v("查找某个进程的二进制文件路径：")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 假设：发现某个程序监听了 1234 端口，PID 为 36987")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("netstat")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-tnlp")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 方式一：筛选 PID 为 36987 的进程，然后即可看到对应的二进制文件")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("ps")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-aux")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("grep")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1234")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 方式二")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("### 先列出监听 1234 端口的所有进程及其 PID")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("lsof")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-i")]),s._v(" :1234\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("### 然后查看创建该进程的二进制文件")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("ls")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-l")]),s._v(" /proc/36987/exe\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("ls")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-l")]),s._v(" /proc/"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("或其它PID"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("/exe\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br")])])])])}),[],!1,null,null,null);t.default=n.exports}}]);